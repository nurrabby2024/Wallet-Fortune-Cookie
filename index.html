<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wallet Fortune Cookie</title>

    <!-- Base / Frame metadata (for casts / embeds) -->
    <meta property="fc:frame" content="vNext" />
    <meta property="fc:frame:image" content="https://wallet-fortune-cookie.vercel.app/assets/hero.png" />
    <meta property="fc:frame:button:1" content="Open Fortune Cookie" />
    <meta property="fc:frame:button:1:action" content="link" />
    <meta property="fc:frame:button:1:target" content="https://wallet-fortune-cookie.vercel.app/" />

    <!-- Mini App embed metadata (required for Base preview image) -->
    <meta
      name="fc:miniapp"
      content='{
        "version": "next",
        "imageUrl": "https://wallet-fortune-cookie.vercel.app/assets/hero.png",
        "button": {
          "title": "Open Wallet Fortune Cookie",
          "action": {
            "type": "launch_frame",
            "url": "https://wallet-fortune-cookie.vercel.app/",
            "name": "Wallet Fortune Cookie",
            "splashImageUrl": "https://wallet-fortune-cookie.vercel.app/assets/splash.png",
            "splashBackgroundColor": "#ffffff"
          }
        }
      }'
    />

    <!-- OpenGraph (fallback for rich cards) -->
    <meta property="og:title" content="Wallet Fortune Cookie" />
    <meta property="og:description" content="Discover your on-chain fortune." />
    <meta property="og:image" content="https://wallet-fortune-cookie.vercel.app/assets/hero.png" />
    <meta property="og:url" content="https://wallet-fortune-cookie.vercel.app/" />

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <img src="./assets/icon.png" alt="Icon" class="app-icon" onerror="this.style.display='none'">
            <h1>Wallet Fortune</h1>
            <p>What does the blockchain hold for you?</p>
        </header>

        <div class="input-group">
            <input type="text" id="walletAddress" placeholder="Enter Wallet (Optional)">
        </div>

        <button id="crackCookieBtn">Crack Open Cookie</button>

        <div id="cookieContainer" class="cookie-container">
            <img src="./assets/fortune-cookie.png" alt="Cookie" class="fortune-cookie-img">
        </div>

        <div id="fortuneCard" class="fortune-card hidden">
            <div class="card-content">
                <span class="emoji">âœ¨</span>
                <p id="fortuneText">Loading...</p>
                <div class="glow"></div>
            </div>
            <button id="resetBtn" class="secondary-btn">Try Again</button>
        </div>
    </div>

    <!-- Mini App SDK + your app script -->
    <script src="https://unpkg.com/@farcaster/miniapp-sdk/dist/sdk.umd.js"></script>
    <script src="script.js"></script>
    <script>
      // Mark app as ready when running inside Base / Mini App container
      window.addEventListener("load", function () {
        if (window.sdk && window.sdk.isInMiniApp && window.sdk.isInMiniApp()) {
          window.sdk.actions.ready();
        }
      });
    </script>
</body>
</html>
